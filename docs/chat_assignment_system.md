# –°–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–∞—Ç–æ–≤ ExtraSpace

## üéØ –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–∞—Ç–æ–≤ —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞—á–∞—Ç—å —á–∞—Ç" —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–∞—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`
- –ß–∞—Ç –Ω–µ –∏–º–µ–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (`manager_id = null`)
- –í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º —á–∞—Ç–µ

### 2. **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è**
- –õ—é–±–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –æ–∂–∏–¥–∞—é—â–∏–π —á–∞—Ç
- –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —á–∞—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `ACTIVE`
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (`manager_id`)
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º

### 3. **–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞**
- –î–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞: "–û–∂–∏–¥–∞—é—â–∏–µ" / "–ê–∫—Ç–∏–≤–Ω—ã–µ"
- –ö–∞—Ä—Ç–æ—á–∫–∏ —á–∞—Ç–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
src/features/chat/ui/
‚îú‚îÄ‚îÄ PendingChatCard.jsx      # –ö–∞—Ä—Ç–æ—á–∫–∞ –æ–∂–∏–¥–∞—é—â–µ–≥–æ —á–∞—Ç–∞
‚îú‚îÄ‚îÄ PendingChatsPanel.jsx    # –ü–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º –æ–∂–∏–¥–∞—é—â–∏—Ö
‚îú‚îÄ‚îÄ ManagerChatList.jsx      # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îî‚îÄ‚îÄ ClearMessagesButton.jsx  # –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
```

### –•—É–∫–∏

```
src/shared/lib/hooks/
‚îú‚îÄ‚îÄ use-pending-chats.js     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∂–∏–¥–∞—é—â–∏–º–∏ —á–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ use-manager-chats.js     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îú‚îÄ‚îÄ use-chat.js             # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —á–∞—Ç–∞
‚îî‚îÄ‚îÄ use-chat-messages.js    # –†–∞–±–æ—Ç–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
```

## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã

### **PendingChatCard**
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è:
  - üü¢ –ó–µ–ª–µ–Ω—ã–π: —Ç–æ–ª—å–∫–æ —á—Ç–æ (< 2 –º–∏–Ω)
  - üü° –ñ–µ–ª—Ç—ã–π: –æ–∂–∏–¥–∞–µ—Ç (2-5 –º–∏–Ω)
  - üî¥ –ö—Ä–∞—Å–Ω—ã–π: –¥–æ–ª–≥–æ –∂–¥–µ—Ç (> 5 –º–∏–Ω)
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å —á–∞—Ç"

### **ManagerChatList**
- –¢–∞–±—ã "–û–∂–∏–¥–∞—é—â–∏–µ" / "–ê–∫—Ç–∏–≤–Ω—ã–µ" —Å —Å—á–µ—Ç—á–∏–∫–∞–º–∏
- –ö–∞—Ä—Ç–æ—á–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ —Å –ª–µ–≤–æ–π —Ü–≤–µ—Ç–Ω–æ–π –ø–æ–ª–æ—Å–æ–π
- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–µ —Ñ–æ–Ω—ã –∏ —Ç–µ–Ω–∏
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω**
- Responsive –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –æ—Ç—Å—Ç—É–ø—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ touch-—Å–æ–±—ã—Ç–∏–π

## üîå WebSocket —Å–æ–±—ã—Ç–∏—è

### –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π:

```javascript
WS_MESSAGE_TYPES.CHAT_ASSIGNED  // –ß–∞—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä—É
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:
- `NEW_CHAT` ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö
- `CHAT_ASSIGNED` ‚Üí –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —á–∞—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É
- `CHAT_ACCEPTED` ‚Üí –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á–∞—Ç–∞

## üìä –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π polling**
- –° WebSocket: –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
- –ë–µ–∑ WebSocket: –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –ø—Ä–∏ WebSocket —Å–æ–±—ã—Ç–∏—è—Ö

### **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- React Query –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üõ†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend

### –û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ backend:

```javascript
// WebSocket —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:
{
  type: 'CHAT_ASSIGNED',
  chatId: number,
  userId: number,
  managerId: number
}
```

### API endpoints:
- `GET /chats/pending-chats` - –°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö
- `GET /chats/manager` - –ß–∞—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `PUT /chats/:id/accept` - –ü—Ä–∏–Ω—è—Ç–∏–µ —á–∞—Ç–∞

## üéØ Workflow

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å —á–∞—Ç"
2. –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "–û–∂–∏–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞"
3. –£–≤–µ–¥–æ–º–ª—è–µ—Ç—Å—è –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
4. –ù–∞—á–∏–Ω–∞–µ—Ç –æ–±—â–µ–Ω–∏–µ

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞:
1. –í–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —á–∞—Ç–µ
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥–∫—É "–û–∂–∏–¥–∞—é—â–∏–µ"
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–Ω—è—Ç—å —á–∞—Ç"
4. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ê–∫—Ç–∏–≤–Ω—ã–µ"
5. –í–µ–¥–µ—Ç –æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º

## üé® CSS –∫–ª–∞—Å—Å—ã

```css
/* –ö–∞—Ä—Ç–æ—á–∫–∏ –æ–∂–∏–¥–∞—é—â–∏—Ö —á–∞—Ç–æ–≤ */
.pending-chat-card
.gradient-bg-blue
.gradient-bg-green
.accept-button

/* –¢–∞–±—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ */
.manager-tabs
.manager-tab
.manager-tab.active

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
.animate-fadeInUp
.slideInUp
```

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
npm run dev
```

### –°–±–æ—Ä–∫–∞:
```bash
npm run build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –õ–æ–≥–∏–Ω –∫–∞–∫ MANAGER
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª–∞–¥–æ–∫ "–û–∂–∏–¥–∞—é—â–∏–µ" / "–ê–∫—Ç–∏–≤–Ω—ã–µ"
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–∏—è —á–∞—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

- Responsive –∫–∞—Ä—Ç–æ—á–∫–∏ —á–∞—Ç–æ–≤
- –°—Ç–µ–∫ –≤–∫–ª–∞–¥–æ–∫ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- Touch-friendly –∫–Ω–æ–ø–∫–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```javascript
refetchInterval: isConnected ? 30000 : 5000
staleTime: isConnected ? 10000 : 0
```

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
```javascript
cacheTime: 30000 // 30 —Å–µ–∫—É–Ω–¥
retry: 2 // 2 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–∞—Ç–æ–≤ —Å:

‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º** - –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã, –∞–Ω–∏–º–∞—Ü–∏–∏, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI  
‚úÖ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏** - WebSocket + –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π polling  
‚úÖ **–ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º** - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ —á–∞—Ç—ã  
‚úÖ **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –æ–∂–∏–¥–∞–Ω–∏—è** - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ **–ú–æ–±–∏–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π** - Responsive –¥–∏–∑–∞–π–Ω  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ 